{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate,useLocation}from'react-router-dom';import{User,Settings,LogOut,ChevronDown}from'lucide-react';import NavMenu from'./nav/NavMenu';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Layout(_ref){let{children}=_ref;const{user,isAuthenticated,logout}=useAuth();const navigate=useNavigate();const location=useLocation();const[showUserDropdown,setShowUserDropdown]=useState(false);const dropdownRef=useRef(null);// List of routes where login button should be hidden (but header still shows)\nconst hideLoginButtonRoutes=['/login','/sign-up','/verify','/reset-password'];const shouldHideLoginButton=hideLoginButtonRoutes.includes(location.pathname);// List of routes where entire header and navigation should be hidden\nconst hideHeaderRoutes=['/verify-email'];const shouldHideHeader=hideHeaderRoutes.some(route=>location.pathname.startsWith(route));const handleLogout=async()=>{await logout();navigate('/login');};// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setShowUserDropdown(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column vh-100\",children:[!shouldHideHeader&&/*#__PURE__*/_jsxs(\"header\",{className:\"bg-white border-bottom d-flex justify-content-between align-items-center px-5 py-3 shadow-sm\",style:{minHeight:'80px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"me-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-3 bg-dark p-2 d-flex align-items-center justify-content-center\",style:{width:'48px',height:'48px'},children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold text-white fs-4\",children:\"C\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0 fw-bold text-dark\",children:\"Centralized Application Management\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Enterprise Data Access Platform\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:isAuthenticated?/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0 border-0 d-flex align-items-center text-decoration-none\",onClick:()=>setShowUserDropdown(!showUserDropdown),style:{background:'none'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"me-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle bg-light p-2\",children:/*#__PURE__*/_jsx(User,{size:20,className:\"text-dark\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-start me-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-semibold text-dark\",children:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Administrator\"})]}),/*#__PURE__*/_jsx(ChevronDown,{size:16,className:\"text-muted\"})]})}),showUserDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute end-0 mt-2 bg-white border rounded shadow-lg\",style:{minWidth:'200px',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-light w-100 d-flex align-items-center justify-content-start mb-1\",onClick:()=>{navigate('/settings');setShowUserDropdown(false);},children:[/*#__PURE__*/_jsx(Settings,{size:16,className:\"me-2\"}),\"Settings\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger w-100 d-flex align-items-center justify-content-start\",onClick:()=>{handleLogout();setShowUserDropdown(false);},children:[/*#__PURE__*/_jsx(LogOut,{size:16,className:\"me-2\"}),\"Logout\"]})]})})]}):!shouldHideLoginButton?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm fw-semibold\",onClick:()=>navigate('/login'),children:\"Login\"}):null})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-grow-1 overflow-hidden\",children:[isAuthenticated&&!shouldHideHeader&&/*#__PURE__*/_jsx(NavMenu,{}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-grow-1 overflow-auto \".concat(isAuthenticated&&!shouldHideHeader?'p-4 bg-light':shouldHideHeader?'':''),style:{minWidth:0,width:isAuthenticated&&!shouldHideHeader?'calc(100% - 220px)':'100%'},children:children})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useLocation","User","Settings","LogOut","ChevronDown","NavMenu","useAuth","jsx","_jsx","jsxs","_jsxs","Layout","_ref","children","user","isAuthenticated","logout","navigate","location","showUserDropdown","setShowUserDropdown","dropdownRef","hideLoginButtonRoutes","shouldHideLoginButton","includes","pathname","hideHeaderRoutes","shouldHideHeader","some","route","startsWith","handleLogout","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","style","minHeight","width","height","ref","onClick","background","size","username","minWidth","zIndex","concat"],"sources":["/Users/jaili/csharpProject/Prototype/Prototype/ClientApp/src/components/Layout.tsx"],"sourcesContent":["import React, { ReactNode, useState, useEffect, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { User, Settings, LogOut, ChevronDown } from 'lucide-react';\nimport NavMenu from './nav/NavMenu';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface LayoutProps {\n  children: ReactNode; // Typing children correctly\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  const { user, isAuthenticated, logout } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  \n  // List of routes where login button should be hidden (but header still shows)\n  const hideLoginButtonRoutes = ['/login', '/sign-up', '/verify', '/reset-password'];\n  const shouldHideLoginButton = hideLoginButtonRoutes.includes(location.pathname);\n  \n  // List of routes where entire header and navigation should be hidden\n  const hideHeaderRoutes = ['/verify-email'];\n  const shouldHideHeader = hideHeaderRoutes.some(route => location.pathname.startsWith(route));\n\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowUserDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div className=\"d-flex flex-column vh-100\">\n      {/* Header - Hidden on verification pages */}\n      {!shouldHideHeader && (\n        <header\n          className=\"bg-white border-bottom d-flex justify-content-between align-items-center px-5 py-3 shadow-sm\"\n          style={{ minHeight: '80px' }}\n        >\n        <div className=\"d-flex align-items-center\">\n          <div className=\"me-3\">\n            <div className=\"rounded-3 bg-dark p-2 d-flex align-items-center justify-content-center\" style={{ width: '48px', height: '48px' }}>\n              <span className=\"fw-bold text-white fs-4\">C</span>\n            </div>\n          </div>\n          <div>\n            <h3 className=\"mb-0 fw-bold text-dark\">Centralized Application Management</h3>\n            <small className=\"text-muted\">Enterprise Data Access Platform</small>\n          </div>\n        </div>\n        <div>\n          {isAuthenticated ? (\n            <div className=\"position-relative\" ref={dropdownRef}>\n              <button\n                className=\"btn btn-link p-0 border-0 d-flex align-items-center text-decoration-none\"\n                onClick={() => setShowUserDropdown(!showUserDropdown)}\n                style={{ background: 'none' }}\n              >\n                <div className=\"d-flex align-items-center\">\n                  <div className=\"me-2\">\n                    <div className=\"rounded-circle bg-light p-2\">\n                      <User size={20} className=\"text-dark\" />\n                    </div>\n                  </div>\n                  <div className=\"text-start me-2\">\n                    <div className=\"fw-semibold text-dark\">{user?.username}</div>\n                    <small className=\"text-muted\">Administrator</small>\n                  </div>\n                  <ChevronDown size={16} className=\"text-muted\" />\n                </div>\n              </button>\n              \n              {showUserDropdown && (\n                <div \n                  className=\"position-absolute end-0 mt-2 bg-white border rounded shadow-lg\"\n                  style={{ minWidth: '200px', zIndex: 1000 }}\n                >\n                  <div className=\"p-2\">\n                    <button\n                      className=\"btn btn-light w-100 d-flex align-items-center justify-content-start mb-1\"\n                      onClick={() => {\n                        navigate('/settings');\n                        setShowUserDropdown(false);\n                      }}\n                    >\n                      <Settings size={16} className=\"me-2\" />\n                      Settings\n                    </button>\n                    <button\n                      className=\"btn btn-outline-danger w-100 d-flex align-items-center justify-content-start\"\n                      onClick={() => {\n                        handleLogout();\n                        setShowUserDropdown(false);\n                      }}\n                    >\n                      <LogOut size={16} className=\"me-2\" />\n                      Logout\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : !shouldHideLoginButton ? (\n            <button \n              className=\"btn btn-primary btn-sm fw-semibold\"\n              onClick={() => navigate('/login')}\n            >\n              Login\n            </button>\n          ) : null}\n        </div>\n        </header>\n      )}\n\n      {/* Sidebar + Main */}\n      <div className=\"d-flex flex-grow-1 overflow-hidden\">\n        {isAuthenticated && !shouldHideHeader && <NavMenu />}\n        <main \n          className={`flex-grow-1 overflow-auto ${isAuthenticated && !shouldHideHeader ? 'p-4 bg-light' : shouldHideHeader ? '' : ''}`}\n          style={{ \n            minWidth: 0, \n            width: isAuthenticated && !shouldHideHeader ? 'calc(100% - 220px)' : '100%' \n          }}\n        >\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}